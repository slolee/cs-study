## OSI 7 계층은 무엇이고 왜 사용하는지 설명해주세요.

OSI 7 계층은 네트워크상에서 통신이 일어나는 과정을 7가지 계층으로 분류한 표준을 말합니다.

이렇게 7 계층으로 나눈 첫 번째 이유는 네트워크 통신 과정에서 에러가 발생했을 때 네트워크 전반적인 문제가 아닌 특정 계층의 문제로 격리시키기 위해서입니다. 두 번째로 통신하기 위한 호스트들이 어떤 과정을 거쳐서 서로 통신해야하는지 정의하기 위해서입니다. 마지막으로 각 계층의 기능을 수 행하는 네트워크 장비가 서로의 역할을 구분하고 해당 표준을 따라서 만들어질 수 있도록 하기 위함입니다.

<br>

## OSI 7 계층의 각 계층에 대해서 설명해주세요.

OSI 7 계층은 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 어플리케이션 계층으로 나눠집니다.

물리 계층은 데이터를 전기신호로 바꿔 목적지까지 전달하고 수신한 전기 신호를 다시 데이터로 변환하는 역할을 수행합니다.

데이터 링크 계층은 전송하려는 데이터를 안전하게 전송하기 위해 데이터를 Frame 이라는 단위로 묶어 오류제어, 흐름제어와 같은 기능을 제공합니다.

네트워크 계층은 전송하려는 데이터를 패킷이라는 단위로 묶어 어떤 경로를 통해 전달하면 목적지까지 전달할 수 있는지에 대해서 결정하는 기능을 제공합니다.

전송 계층은 통신하는 두 호스트간에 패킷을 어떻게 주고받을지 결정하는 역할을 수행합니다.

세션 계층은 통신하려는 두 호스트간의 연결인 세션을 어떻게 생성하고 관리할지에 대한 역할을 수행합니다.

표현 계층은 데이터 인코딩, 암호화와 같은 데이터를 표현하는 방식을 어떻게 처리할지에 대한 기능을 제공합니다.

어플리케이션 계층은 소프트웨어를 통해 실제 사용자와 소통하며 데이터의 입력을 받아 하위 계층으로 전달하고, 하위 계층으로부터 받은 데이터를 사용자에게 보여주는 역할을 수행합니다.

<br>

## 각 계층의 역할을 수행하는 장비나 프로토콜에 대해서 설명해주세요.

`물리 계층`에서 사용되는 장비는 허브와 리피터가 있습니다.

`데이터링크 계층`에서 사용되는 대표적인 장비로는 스위치가 있고, 사용되는 대표적인 프로토콜에는 이더넷, 토큰링이 있습니다.

`네트워크 계층`에서 사용되는 대표적인 장비로는 라우터가 있고, 사용되는 대표적인 프로토콜에는 IP, ICMP, ARP, RARP 등이 있습니다.

`전송 계층`에서 사용되는 대표적인 장비로는 게이트웨이가 있고, 사용되는 대표적인 프로토콜에는 TCP, UDP 가 있습니다.

`세션 계층`에서 사용되는 대표적인 프로토콜에는 SSH, TLS 이 있습니다.

`표현 계층`에서 사용되는 대표적인 프로토콜에는 ASCII, JPEG, MIDI 이 있습니다.

`응용 계층`에서 사용되는 대표적인 프로토콜에는 DNS, HTTP, SMTP 이 있습니다.

<br>

## 스위치가 하는 역할은 무엇일까요?

스위치는 MAC 주소를 이용해 프레임을 목적지까지 전달하는 역할을 수행합니다. 허브와 달리 포트별로 콜리전 도메인이 나눠지기 때문에 LAN 에서 통신시 충돌이 적게 발생한다는 장점이 있습니다.

2계층에서 동작하는 스위치 이외에도 3계층에서 동작하며 라우팅 기능을 제공해주는 L3 스위치와, 4계층에서 동작하며 로드밸런싱 기능을 제공해주는 L4 스위치가 있습니다.

<br>

## 라우터가 하는 역할은 무엇일까요?

라우터는 두 가지 역할을 수행하는데 첫 번째는 해당 패킷을 어떤 경로로 목적지까지 전달할지 결정하는 것입니다. 라우터는 라우팅 프로토콜을 통해 해당 패킷을 어느 경로로 전달할지 결정하게 됩니다.

두 번째는 이렇게 경로가 정해진 패킷을 목적지를 향해 전달하는 역할을 수행합니다.

이외에도 라우터가 4계층의 게이트웨이 역할까지 수행하기도 하며 NAT 의 역할도 수행하기도 합니다.

<br>

## 게이트웨이의 역할이 무엇인가요?

게이트웨이는 내부 네트워크에서 다른 네트워크로 넘어가기 위한 출입구 역할을 합니다. 즉 내부 네트워크의 호스트가 인터넷과 같은 외부 네트워크에 접근하기 위해서는 반드시 게이트웨이를 거쳐야 합니다.

각 호스트가 가지고 있는 라우팅 테이블에는 외부 네트워크로 가기 위해서는 게이트웨이로 프레임을 전달하도록 설정되어 있습니다.

<br>

## ICMP 에 대해서 설명해주세요.

ICMP 는 3계층의 프로토콜로 Internet Protocol 인 IP 를 보조하는 프로토콜입니다. IP 는 패킷을 목적지에 전달하기 위한 방법에 대해서만 고려를 하기 때문에 중간에 패킷이 유실되거나 에러가 발생한 경우 이를 송신자에게 알릴 방법이 없습니다. 이때 수신자는 ICMP 패킷을 사용해 에러가 발생했음을 알리게 됩니다.

ICMP 패킷은 이렇게 에러 메세지 생성 및 전달의 목적 이외에도 네트워크의 품질 확인을 위해서 사용되기도 합니다. 예를 들어 널리 알려져있는 Ping 명령어에서 ICMP 패킷을 사용하는 것으로 알고 있습니다.

<br>

## 내부 네트워크의 호스트가 외부 네트워크의 호스트에게 데이터를 전달하는 과정에 대해서 간단하게 설명해주세요.

우선 송신자는 7계층에서 인터페이스를 통해 송신을 하게되면 4계층에서 Port, 3계층에서 목적지 IP 정보를 저장합니다. 그리고 2계층 헤더에 목적지 MAC 주소를 작성하기 위해 호스트의 라우팅 테이블을 참조해 게이트웨이의 IP 주소를 가져옵니다. 해당 IP 주소를 ARP 통신을 통해 맥 주소로 변환해 2계층 헤더에 저장하게 됩니다. 이제 1계층을 통해 전기신호로 변환하고 목적지를 향해 전송하게 됩니다.

위 프레임은 게이트웨이 역할을 하는 라우터에 도착하며 2계층 헤더를 제거해 패킷으로 만들고 패킷을 전송하기 위한 경로를 라우팅 프로토콜을 통해 찾습니다. 이후 라우터는 찾은 경로로 데이터를 게이트웨이에 거쳐 보내게 됩니다.

이후 여러 라우터를 거쳐 목적지 IP 를 향하게 되는데 패킷을 전달받은 라우터는 패킷의 목적지 IP 를 읽어 라우팅 프로토콜을 통해 경로를 찾고 보내기를 반복하게 됩니다.

최종적으로 목적지 IP 가 포함된 라우터에 패킷이 도착하면, 라우터는 해당 패킷을 내부 네트워크로 라우팅하게 됩니다. 스위치는 패킷에 저장되어있는 목적지 IP 를 이용해 목적지 MAC 주소를 알아내 프레임을 만들고 호스트에게 전달하게 됩니다.

호스트는 전달받은 프레임의 2계층, 3계층, 4계층, 5계층, 6계층을 순차적으로 거쳐 최종적으료 7계층에서 인터페이스를 통해 수신자에게 데이터를 전달하게 됩니다.

<br>

## NAT 와 사설 IP 그리고 공인 IP 에 대해서 설명해주세요.

공인 IP 는 전 세계에 고유한 IP 주소를 의미하고 사설 IP 는 내부 네트워크에서만 사용할 수있는 IP 주소를 의미합니다. 공인 IP 가 모자라게 되면서 내부 네트워크에서만 사용할 수 있는 사설 IP 를 설정하고 공인 IP 1개에 여러 개의 사설 IP 를 매핑하게되고 해당 사설 IP 를 가진 호스트가 외부 네트워크에 나갈때만 해당 공인 IP 를 할당받아 나가게 됩니다.

이때 공인 IP 와 사설 IP 의 변환작업을 수행해주는 것이 NAT 입니다. 사설 IP 가 외부 네트워크로 나가려고 할 때 공인 IP 를 할당하며 그 사실을 NAT 테이블에 기록하게 됩니다. 해당 요청에 대한 응답이 오게되면 NAT 테이블을 통해 누구에게 온 응답인지 확인해 라우팅하게 됩니다.

<br>

## NAT 의 장점에는 어떤 것이 있을까요?

NAT 의 첫 번째 장점은 사설 IP 를 통해 부족한 공인 IP 문제를 해결했다는 점입니다.

두 번째 장점은 사설 IP 를 사용함으로써 내부에서 외부로 먼저 요청을 보내지 않은 호스트에게는 외부에서 내부로 먼저 요청을 보낼 수 없다는 것입니다. 공격자가 해당 공인 IP 에게 패킷을 보낸다고 하더라도 NAT 테이블에 정보가 없기 때문에 폐기되게 됩니다. 따라서 보안적으로 조금 더 안전하다고 말할 수 있습니다.