## 프로세스와 스레드에 대해서 설명해주세요.

프로세스는 디스크에 저장되어 있던 프로그램이 메모리를 할당받아 CPU 에 의해서 실행되는 상태를 의미합니다. 스레드는 이러한 프로세스의 실행 작업 단위로 모든 프로세스는 적어도 1개 이상의 스레드를 가지고 있습니다.

<br>

## 멀티 프로세스와 멀티 스레드에 대해서 설명해주세요.

멀티 프로세스와 멀티 스레드는 둘다 병렬적으로 작업흐름을 만드는 것을 의미합니다.

멀티 스레드는 Heap, Code, Data 와 같은 공간을 공유하기 때문에 운영체제로부터 생성될 때 드는 비용과 리소스를 적게 차지한다는 장점이 있습니다. 또한 공유하는 Heap 을 통해 스레드간의 통신을 쉽게 구현할 수 있다는 장점도 있습니다. 그리고 Context Switch 비용도 멀티 프로세스보다 적은 것으로 알고 있습니다.

하지만 멀티 스레드의 단점으로는 하나의 스레드에서 예외가 발생했을 경우 모든 스레드에게 영향을 미칠 수 있다는 것입니다. 반면에 멀티 프로세스에서는 하나의 프로세스에 문제가 발생하더라도 해당 프로세스에만 영향이 있고 다른 프로세스에는 영향을 미치지 않습니다. 크롭 탭이 멀티 프로세스로 구현된 대표적인 예시로 하나의 탭에서 문제가 발생하더라도 다른 탭에 영향을 주지 않습니다.

<br>

## Context Switching 이란 무엇인가요?

CPU 가 점유하고 있는 프로세스나 스레드가 변경되는 과정을 의미합니다.

프로세스의 예시를 들면 교체 대상이 되는 프로세스에 대한 정보를 PCB 라는 구조체에 PID, 프로세스의 상태, PC, 레지스터 등의 정보를 보관하고, 다음으로 CPU 를 사용할 프로세스의 정보가 보관된 PCB 를 읽어 사용하게 됩니다.

이렇게 CPU 에 의해서 동작하는 프로세스나 스레드의 정보를 교체하는 과정을 Context Switching 이라고 합니다. 이러한 Context Switching 이 발생하는 이유는 CPU 는 한번에 하나의 프로세스만 실행할 수 있기 때문입니다.

<br>

## PCB 와 TCB 가 필요한 이유가 있을까요?

PCB 와 TCB 는 각각 프로세스와 스레드의 정보를 저장하기 위한 구조체입니다.

이러한 PCB 와 TCB 가 필요한 이유는 Context Switch 를 통해 CPU 가 점유하지 않는 프로세스나 스레드가 발생하게되고 이러한 프로세스나 스레드에 대한 정보를 저장해야 하기 때문이라고 생각합니다.

<br>

## 스레드간에는 Heap 이라는 공유되는 메모리를 통해 통신한다고 말씀하셨는데, 프로세스간에 통신하기 위한 방법에는 어떠한 것들이 있을까요?

프로세스간에 통신을 하기 위한 방법으로는 PIPE, 메시지 큐, 공유 메모리, 소켓 등이 있습니다.

PIPE 는 파일을 통해서 두 프로세스가 통신을 하는 방법입니다. PIPE 의 문제는 하나의 PIPE 로는 단방향 통신밖에 되지 않는다는 점입니다. 따라서 양방향 통신을 구현하기 위해서는 두 개의 PIPE 를 사용해야 합니다.

메시지 큐는 커널에서 관리하는 큐를 통해서 통신하는 방법입니다. 송신 프로세스가 특정 키를 통해 메시지 큐에 데이터를 추가하면 수신 프로세스는 동일한 키를 통해 해당 데이터를 꺼내와 사용할 수 있습니다.

공유 메모리는 송신 프로세스와 수신 프로세스가 동일한 메모리 영역에 접근해 통신하는 방법입니다. 송신 프로세스가 해당 메모리 영역에 데이터를 쓰고 수신 프로세스가 해당 메모리 영역에 데이터를 읽는 방식으로 통신이 진행됩니다. 이외에도 공유 메모리는 여러 프로세스간에 동일한 라이브러리 사용과 같은 상황에서 동일한 데이터가 여러 프로세스에 할당되는 것을 방지하기 위해서도 사용됩니다. `공유 메모리는 동일한 메모리에 여러 프로세스가 접근할 수 있는 것이기 때문에 동기화 문제를 반드시 고려해야 하는 단점이 있습니다.`

마지막으로 소켓은 앞서 소개한 것들과 다르게 외부 프로세스와 통신할 때도 사용이 가능한 통신 방법입니다. IP 와 Port 번호로 이루어진 소켓이라는 엔드포인트를 통해 두 프로세스가 서로 통신을 하게 됩니다.

<br>

## 스레드가 Stack, PC, Register 를 스레드마다 독립적으로 할당하는 이유는 뭘까요?

스레드라는 것은 프로세스의 작업 흐름으로 여러 프로세스가 존재할 때 스레드들은 각자의 작업 흐름을 가져야 합니다.

이러한 각자의 작업 흐름을 가지기 위해서는 스레드별로 함수의 지역변수, 리턴주소와 같은 데이터가 저장되는 Stack 과 현재 실행중인 명령어의 주소를 저장하는 PC, 이외에 연산에 필요한 데이터들을 저장하기 위한 레지스터는 독립적으로 존재해야 합니다.